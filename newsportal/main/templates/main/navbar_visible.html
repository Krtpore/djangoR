
{% load static %}
{% load bootstrap5 %}

{% bootstrap_css %}
{% bootstrap_javascript %}


<link rel="stylesheet" href="{% static 'main/css/style.css' %}" />

<script src="https://kit.fontawesome.com/a97047fead.js" crossorigin="anonymous"></script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" >
<!--скрипты ниже для работы выпадающего меню пользователя-->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"> </script>
<!-- jQuery UI !-->
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<script>
    $(function() {
      $("#search_news").autocomplete({
        source: "search_news_auto/",
        select: function (event, ui) { //item selected
          AutoCompleteSelectHandler(event, ui)
        },
        minLength: 2,
      });
    });
    function AutoCompleteSelectHandler(event, ui)
    {
      var selectedObj = ui.item;
    }
</script>




<div class="navbar">
    <div class="row">
        <div class="col-4 content_center">
          <div>
            <img alt="Иконка меню" class="img-fluid" src="{% static 'main/img/site-logo.png' %}" style="max-width:60px;max-height:60px"/>
          </div>
        </div>
        <div class="col-8 content_center">
          <div>
            <h4 class="content-to-hide">Меню сайта</h4>
          </div>
        </div>
      </div>
    <div class="row">
            <div class="col-12">
                  <div class="text-left mb-3">
                      <a href="{% url 'main' %}" class="btn btn-light" role="button">
                      <img src="{% static 'main/img/icon-home.png' %}" alt="Иконка домашней страницы" class="navbaricons"> 
                      <span class="content-to-hide">Домашняя страница</span></a>
                  </div>
                  <div class="text-left mb-3">
                      <a href="{% url 'news' %}"  class="btn btn-light" role="button">
                      <img src="{% static 'main/img/icon-news-reader.png' %}" alt="Иконка просмотра новостей" class="navbaricons">
                      <span class="content-to-hide">Все новости</span></a> 
                  </div>
                  <div class="text-left mb-3">
                      <a href="{% url 'create_article' %}" class="btn btn-light" role="button">
                      <img src="{% static 'main/img/icon-create-article.png' %}" alt="Иконка создания новости" class="navbaricons">
                      <span class="content-to-hide">Предложить новость</span></a>
                  </div>
                  <div class="text-left mb-3">
                      <a href="{% url 'about' %}" class="btn btn-light" role="button">
                          <img src="{% static 'main/img/icon-about-us.png' %}" alt="Иконка просмотра новостей" class="navbaricons"> 
                          <span class="content-to-hide">О нас</span></a>
                  </div>
                  <div class="text-left mb-3">
                      <a href="{% url 'contact_page' %}" class="btn btn-light" role="button">
                          <img src="{% static 'main/img/icon-send-mail.png' %}" alt="Иконка письма" class="navbaricons">
                          <span class="content-to-hide">Написать нам</span></a>
                  </div>
                  <div class="text-left mb-3">
                    <a href="{% url 'user' %}" class="btn btn-light" role="button">
                    <img src="{% static 'main/img/avatar.png' %}" alt="Иконка пользователя" class="navbaricons">
                    <span class="content-to-hide perenos">Мой кабинет</span></a>
                </div>
        <div class="row">
            <div class="grid gap-0 column-gap-3">
            <div class="input-group rounded">
                <input type="search" input id="search_news" class="form-control rounded " placeholder="Искать новости" aria-label="Искать новости" aria-describedby="search_news" />
                <span class="btn btn-light" id="search_news">
                    <i class="fas fa-search"></i>
                </span>
            </div>
            </div>
        </div>
    </div>

    {% if request.user.id %}  <!-- проверяем аутентификацию-->
      <div class="dropdown flex-column mb-auto" >
        <button class="btn btn-primary dropdown-toggle col-12" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" style="background:#212529;">
          <img src="{{ request.user.account.account_image.url }}" alt="" width="25" height="25" class="rounded-circle me-2">
            <div class="d-none d-lg-block "> {{ request.user.username }} </div>
        </button>
        <ul class="dropdown-menu " aria-labelledby="dropdownMenuButton1">
          <li><a class="dropdown-item" href="#"> Мой аккаунт</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="{% url 'logout' %}"> Выход</a></li>
        </ul>
      </div> <!-- выпадающее меню-->
    {% else %} <!-- ссылки на регистрацию и аутентификацию-->
      <ul class="nav nav-pills flex-column mb-auto">
            <li class="nav-item">
                <a href="{% url 'registration' %}" {% if request.resolver_match.view_name  == 'registration' %} class="link-active" aria-current="page" {% endif %}>
                    <i class="fa fa-user menu-icon"></i>
                    <div class="d-none d-lg-block">Регистрация</div>
                </a>
            </li>
            <li class="nav-item">
                <a href="{% url 'login' %}" {% if request.resolver_match.view_name  == 'login' %}
                class="link-active" aria-current="page" {% endif %}>
                    <i class="fa fa-sign menu-icon {% if request.path  == '/users/login' %}
                    link-active {% endif %}" ></i>
                    <div class="d-none d-lg-block">Вход</div>
                </a>
            </li>
      </ul>
    {% endif %}

    <br >
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                  {{ message }}
            </div>
        {% endfor %}
    {% endif %}


</div>

